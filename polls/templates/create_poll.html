{% extends "base.html" %}
{% block content %}

<div class="card" style="max-width:650px;margin:auto">

  <h2 style="font-size:1.9rem;font-weight:800;margin-bottom:25px">
    Create a New Poll
  </h2>

  <form method="POST">
    {% csrf_token %}

    <label style="font-weight:600">Poll Question</label>
    <input type="text" name="question" placeholder="Ask something interesting..." required>

    <label style="font-weight:600">Options</label>
    <div id="opts" class="options-box">

      <div class="opt-row">
        <input type="text" name="options" placeholder="Option 1">
        <button type="button" class="remove-btn" onclick="removeOpt(this)">×</button>
      </div>

      <div class="opt-row">
        <input type="text" name="options" placeholder="Option 2">
        <button type="button" class="remove-btn" onclick="removeOpt(this)">×</button>
      </div>

    </div>

    <button type="button" class="add-option" onclick="addOpt()">+ Add another option</button>

    <div class="setting-box">
      <label class="switch">
        <input type="checkbox" name="include_creator">
        <span class="slider"></span>
      </label>
      <span>Allow me (creator) to vote</span>
    </div>

    <button type="submit" class="btn" style="width:100%;margin-top:10px">
      Create Poll
    </button>

  </form>
</div>

<style>

/* option rows */
.opt-row{
  display:flex;
  gap:10px;
  align-items:center;
  margin-bottom:12px;
}

/* remove option button */
.remove-btn{
  background:#ffe5e5;
  border:none;
  color:#dc2626;
  font-weight:900;
  font-size:1.1rem;
  width:38px;
  height:38px;
  border-radius:10px;
  cursor:pointer;
  transition:.2s;
}
.remove-btn:hover{
  background:#dc2626;
  color:white;
}

/* add option */
.add-option{
  margin-top:5px;
  margin-bottom:25px;
  background:none;
  border:none;
  color:var(--primary);
  font-weight:700;
  cursor:pointer;
  font-size:.95rem;
}
.add-option:hover{
  text-decoration:underline;
}

/* settings panel */
.setting-box{
  display:flex;
  align-items:center;
  gap:12px;
  padding:18px;
  border-radius:14px;
  background:var(--primary-soft);
  border:1px solid var(--border);
  margin-bottom:25px;
}

/* toggle switch */
.switch{
  position:relative;
  display:inline-block;
  width:46px;
  height:24px;
}
.switch input{
  opacity:0;
  width:0;
  height:0;
}
.slider{
  position:absolute;
  cursor:pointer;
  inset:0;
  background:#e5e7eb;
  border-radius:50px;
  transition:.25s;
}
.slider:before{
  position:absolute;
  content:"";
  height:18px;
  width:18px;
  left:3px;
  bottom:3px;
  background:white;
  border-radius:50%;
  box-shadow:0 2px 6px rgba(0,0,0,.2);
  transition:.25s;
}
.switch input:checked + .slider{
  background:linear-gradient(135deg,var(--primary),var(--accent));
}
.switch input:checked + .slider:before{
  transform:translateX(22px);
}

</style>


<script>
function addOpt(){
  const div=document.createElement("div");
  div.className="opt-row";
  div.innerHTML=`
    <input type="text" name="options" placeholder="Another option">
    <button type="button" class="remove-btn" onclick="removeOpt(this)">×</button>
  `;
  document.getElementById("opts").appendChild(div);
}

function removeOpt(btn){
  btn.parentElement.remove();
}
</script>

{% endblock %}
